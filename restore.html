<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://kit.fontawesome.com/64d58efce2.js" crossorigin="anonymous"></script>
    
    <link rel="stylesheet" href="login.css" />
    <link rel="shortcut icon" href="favicon.png" type="image/x-icon">
	  <link rel="icon" href="favicon.png" type="image/x-icon">
    <title>Atkūrimas</title>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@9"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" ></script>
	  <script src="https://unpkg.com/@popperjs/core@2"></script>

  </head>
  <body>
    <style>
      #message {
    text-align: left;
    display:none;
    background: #f1f1f1;
    color: #000;
    position: relative;
    }

    #message p {
    font-size: 15px;
    }


    .valid {
    color: green;
    }

    .valid:before {
    position: relative;
    left: -35px;
    content: "✔";
    }


    .invalid {
    color: dimgray;
    }

    .invalid:before {
    position: relative;
    left: -35px;
    content: "✖";
    }
    </style>

    <script>
      $(document).ready(function(){
        var iURL = window.location.href;
        $("#password2").val(iURL);

        var myInput = document.getElementById("pass1");
        var letter = document.getElementById("letter");
        var capital = document.getElementById("capital");
        var number = document.getElementById("number");
        var length = document.getElementById("length");

        // When the user clicks on the password field, show the message box
        myInput.onfocus = function() {
          document.getElementById("message").style.display = "block";
        }

        // When the user clicks outside of the password field, hide the message box
        myInput.onblur = function() {
          document.getElementById("message").style.display = "none";
        }

        // When the user starts to type something inside the password field
        myInput.onkeyup = function() {
          // Validate lowercase letters
          var lowerCaseLetters = /[a-z]/g;
          if(myInput.value.match(lowerCaseLetters)) {  
            letter.classList.remove("invalid");
            letter.classList.add("valid");
          } else {
            letter.classList.remove("valid");
            letter.classList.add("invalid");
          }
          
          // Validate capital letters
          var upperCaseLetters = /[A-Z]/g;
          if(myInput.value.match(upperCaseLetters)) {  
            capital.classList.remove("invalid");
            capital.classList.add("valid");
          } else {
            capital.classList.remove("valid");
            capital.classList.add("invalid");
          }

          // Validate numbers
          var numbers = /[0-9]/g;
          if(myInput.value.match(numbers)) {  
            number.classList.remove("invalid");
            number.classList.add("valid");
          } else {
            number.classList.remove("valid");
            number.classList.add("invalid");
          }
          
          // Validate length
          if(myInput.value.length >= 8) {
            length.classList.remove("invalid");
            length.classList.add("valid");
          } else {
            length.classList.remove("valid");
            length.classList.add("invalid");
          }
        }
      });
    </script>

    <div class="container">
      <div class="forms-container">
        <div class="signin-signup">

          <form action="restore.php" method="POST" class="sign-in-form2">
            <h2 class="title">Atkurti</h2>
            <div class="input-field" style="background:white">
              <i class="fas fa-lock"></i>
              <input style="display: none;"  value="" id="password2" name="password2" type="text" placeholder="Naujas slaptažodis" required/>
              <input id="pass1" name="password1" type="password" placeholder="Slaptažodis" required pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" title="Slaptažodis privalo atitikti reikalavimus"/>
            </div>
            <div id="message">
              <p id="letter" class="invalid">Viena <b>mažoji </b> raidė</p>
              <p id="capital" class="invalid">Viena <b>didžioji raidė</b> raidė</p>
              <p id="number" class="invalid">Vienas <b>skaičius</b></p>
              <p id="length" class="invalid">Mažiausiai <b>8 simboliai</b></p>
            </div>
            <input type="submit" value="Atkurti" class="btn solid" />
          </form>
      
        </div>
      </div>

      <div class="panels-container">
        <div class="panel left-panel">
          <img src="img/log.svg" class="image" alt="" />
        </div> 
      </div>
    </div>

    <script src="app.js"></script>
  </body>
</html>